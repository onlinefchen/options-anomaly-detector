<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊúüÊùÉÂ∏ÇÂú∫ÂºÇÂ∏∏ÂàÜÊûêÊä•Âëä</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Courier New", Courier, monospace;
            background: #f5f5f7;
            padding: 40px 20px;
            color: #1d1d1f;
            line-height: 1.4;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: #fff;
            padding: 40px;
            border: 1px solid #d2d2d7;
            margin-bottom: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #1d1d1f;
            letter-spacing: -0.5px;
        }

        .header .date {
            color: #6e6e73;
            font-size: 14px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1px;
            margin-bottom: 20px;
            background: #d2d2d7;
            border: 1px solid #d2d2d7;
        }

        .stat-card {
            background: #fff;
            padding: 24px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 36px;
            font-weight: 600;
            margin: 8px 0;
            color: #1d1d1f;
        }

        .stat-card .label {
            color: #6e6e73;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-card.high .number { color: #1d1d1f; }
        .stat-card.medium .number { color: #1d1d1f; }
        .stat-card.low .number { color: #1d1d1f; }
        .stat-card.total .number { color: #1d1d1f; }

        .nav {
            background: #fff;
            padding: 16px 24px;
            border: 1px solid #d2d2d7;
            margin-bottom: 20px;
            text-align: center;
        }

        .nav a {
            display: inline-block;
            padding: 8px 16px;
            margin: 0 4px;
            background: #000;
            color: #fff;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.2s;
        }

        .nav a:hover {
            background: #333;
        }

        .section {
            background: #fff;
            padding: 32px;
            border: 1px solid #d2d2d7;
            margin-bottom: 20px;
        }

        .section h2 {
            margin-bottom: 24px;
            color: #1d1d1f;
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.3px;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 24px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
            border: 1px solid #d2d2d7;
        }

        table th {
            background: #f5f5f7;
            color: #1d1d1f;
            padding: 8px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
            border-bottom: 1px solid #d2d2d7;
        }

        table th.sortable {
            cursor: pointer;
            user-select: none;
            position: relative;
        }

        table th.sortable:hover {
            background: #e8e8ed;
        }

        table th.sortable.sorted-asc .sort-icon::after {
            content: ' ^';
        }

        table th.sortable.sorted-desc .sort-icon::after {
            content: ' v';
        }

        .sort-icon {
            font-size: 12px;
            opacity: 0.5;
            margin-left: 4px;
        }

        table td {
            padding: 8px 12px;
            border-bottom: 1px solid #d2d2d7;
            font-size: 13px;
        }

        table tr:hover {
            background: #f5f5f7;
        }


        .compact-cell {
            font-size: 12px;
            line-height: 1.4;
            padding: 6px 10px !important;
        }

        .compact-cell div {
            margin: 2px 0;
        }

        .contract-item {
            white-space: nowrap;
        }

        .oi-badge {
            background: #f5f5f7;
            padding: 2px 6px;
            font-size: 11px;
            color: #1d1d1f;
            white-space: nowrap;
        }

        .pct {
            color: #6e6e73;
            font-size: 12px;
        }

        .compact-cell small {
            color: #86868b;
            font-size: 11px;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            color: #fff;
            background: #000;
            font-size: 12px;
            font-weight: 500;
        }

        .macro-content {
            line-height: 1.8;
            font-size: 14px;
        }

        .macro-content p {
            margin: 16px 0;
        }

        .macro-content strong {
            font-weight: 600;
            color: #1d1d1f;
        }

        .macro-content ul {
            margin: 12px 0;
            padding-left: 24px;
        }

        .macro-content li {
            margin: 8px 0;
        }

        .footer {
            text-align: center;
            color: #6e6e73;
            margin-top: 40px;
            padding: 20px;
            font-size: 12px;
        }

        @media (max-width: 768px) {
            .stats {
                grid-template-columns: 1fr;
            }
            .header h1 {
                font-size: 24px;
            }
            .nav a {
                display: block;
                margin: 8px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Options Market Anomaly Analysis</h1>
            <p class="date">üîí <strong>Áæé‰∏úÊó∂Èó¥:</strong> 2025-11-01 13:39:06 EDT | <strong>‰∏úÂÖ´Âå∫Êó∂Èó¥:</strong> 2025-11-02 01:39:06 | <strong>‰∫§ÊòìÊó∂ÊÆµ:</strong> ‰ºëÂ∏Ç (Market Closed) | <strong>Êï∞ÊçÆÊù•Ê∫ê:</strong> CSVÊñá‰ª∂ (2025-10-30.csv.gz)</p>
        </div>

        <div class="nav">
            <a href="index.html">Latest Report</a>
            <a href="archive.html">Archive</a>
        </div>

        <div class="stats">
            <div class="stat-card total">
                <div class="label">ÂàÜÊûêËÇ°Á•®Êï∞</div>
                <div class="number">4353</div>
            </div>
            <div class="stat-card total">
                <div class="label">ÂºÇÂ∏∏ÊÄªÊï∞</div>
                <div class="number">3457</div>
            </div>
            <div class="stat-card high">
                <div class="label">È´ò‰∏•Èáç</div>
                <div class="number">3447</div>
            </div>
            <div class="stat-card medium">
                <div class="label">‰∏≠‰∏•Èáç</div>
                <div class="number">10</div>
            </div>
            <div class="stat-card low">
                <div class="label">‰Ωé‰∏•Èáç</div>
                <div class="number">0</div>
            </div>
        </div>

        <div class="section">
            <h2>Macro Market Outlook</h2>
            <div class="macro-content">
                <strong>Market Sentiment &amp; Positioning</strong>

<ul><li><strong>C/P Ratio Analysis</strong>: Across SPY, QQQ, and IWM, the Call/Put (C/P) volume ratios are below 1.0 (SPY at 0.78, QQQ at 0.75, IWM at 0.60), indicating a prevailing bearish sentiment as put volumes exceed call volumes. This suggests that investors are more inclined to hedge against downside risk or are speculating on a market decline.</li>

<li><strong>Smart Money Positioning</strong>: The absence of open interest data and the lack of strike concentration details make it challenging to ascertain precise smart money positioning. However, the higher put volumes relative to calls suggest that institutions might be increasing protective hedges, possibly due to macroeconomic uncertainties.</li>

<li><strong>Unusual Patterns</strong>: The high put volumes across all indices without corresponding open interest suggest short-term hedging rather than long-term directional bets. This could be indicative of heightened caution in the market, possibly driven by upcoming economic data releases or geopolitical events.</li>

<strong>Macro Outlook</strong>

<li><strong>Current Environment</strong>: The macro backdrop is characterized by a cautious Federal Reserve balancing inflation control with economic growth. Inflation remains a concern, although recent data might show signs of moderation. The Fed's policy trajectory, with potential further rate hikes or pauses, will be critical.</li>

<li><strong>Key Risks and Opportunities</strong>: Risks include potential economic slowdown due to protracted tightening, geopolitical tensions, and supply chain disruptions. Opportunities may arise from sectors benefiting from potential fiscal stimulus or shifts towards renewable energy.</li>

<li><strong>Investor Focus</strong>: Investors should closely monitor upcoming Fed meetings, CPI data, and geopolitical developments. Shifts in these areas could quickly alter market dynamics and investor sentiment.</li>

<strong>Key Takeaways</strong>

<li>Institutional sentiment leans bearish, with significant put activity indicating a cautious stance amid uncertain macro conditions.</li>
<li>Absence of open interest data suggests short-term hedging as a primary market activity, reflecting immediate concerns rather than long-term positioning.</li>
<li>The macro environment remains challenging with inflation concerns and Fed policy as central themes; vigilance on economic indicators and geopolitical events is crucial.</li>
<li>Investors should be prepared for potential volatility spikes and position accordingly, balancing risk management with strategic opportunities.</li>
<li>Consider sectors with defensive characteristics or those poised to benefit from structural economic changes as part of a diversified strategy.</li></ul>
            </div>
        </div>

        <div class="section">
            <h2>Market Overview - Top 30 by Volume</h2>
            <div class="chart-container">
                <canvas id="volumeChart"></canvas>
            </div>
        </div>

        <div class="section">
            <h2>Market Indices (3)</h2>
            <table id="indexTable">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th class="sortable" data-table="index" data-column="ticker" data-type="string">Ticker <span class="sort-icon"></span></th>
                        <th class="sortable" data-table="index" data-column="total_volume" data-type="number">Total Volume <span class="sort-icon"></span></th>
                        <th class="sortable" data-table="index" data-column="cp_volume_ratio" data-type="number">C/P Volume <span class="sort-icon"></span></th>
                        <th class="sortable" data-table="index" data-column="total_oi" data-type="number">Total OI <span class="sort-icon"></span></th>
                        <th class="sortable" data-table="index" data-column="cp_oi_ratio" data-type="number">C/P OI <span class="sort-icon"></span></th>
                        <th>Top 3 Contracts</th>
                        <th>10-Day Activity</th>
                        <th>Streak</th>
                    </tr>
                </thead>
                <tbody id="indexTableBody">
                    
                <tr>
                    <td>1</td>
                    <td><strong>SPY</strong></td>
                    <td>845.06W</td>
                    <td>0.78</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $682.06</small></div></td>
                    <td class="compact-cell">
                <div><strong>10/10 [HOT]</strong> +16</div>
                <div><small>Avg Rank: 2.6</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>10</strong></td>
                </tr>
            
                <tr>
                    <td>2</td>
                    <td><strong>QQQ</strong></td>
                    <td>440.14W</td>
                    <td>0.75</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $629.05</small></div></td>
                    <td class="compact-cell">
                <div><strong>10/10 [HOT]</strong> +17</div>
                <div><small>Avg Rank: 3.8</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>10</strong></td>
                </tr>
            
                <tr>
                    <td>3</td>
                    <td><strong>IWM</strong></td>
                    <td>155.88W</td>
                    <td>0.60</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $246.23</small></div></td>
                    <td class="compact-cell">
                <div><strong>8/10 [ACT]</strong> -</div>
                <div><small>Avg Rank: 6.6</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>5</strong></td>
                </tr>
            
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Stocks & ETFs - Top 25 (2025-11-01 from 2025-10-30.csv.gz)</h2>
            <table id="stockTable">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th class="sortable" data-table="stock" data-column="ticker" data-type="string">Ticker <span class="sort-icon"></span></th>
                        <th class="sortable" data-table="stock" data-column="total_volume" data-type="number">Total Volume <span class="sort-icon"></span></th>
                        <th class="sortable" data-table="stock" data-column="cp_volume_ratio" data-type="number">C/P Volume <span class="sort-icon"></span></th>
                        <th class="sortable" data-table="stock" data-column="total_oi" data-type="number">Total OI <span class="sort-icon"></span></th>
                        <th class="sortable" data-table="stock" data-column="cp_oi_ratio" data-type="number">C/P OI <span class="sort-icon"></span></th>
                        <th>Top 3 Contracts</th>
                        <th>10-Day Activity</th>
                        <th>Streak</th>
                    </tr>
                </thead>
                <tbody id="stockTableBody">
                    
                <tr>
                    <td>1</td>
                    <td><strong>NVDA</strong></td>
                    <td>302.31W</td>
                    <td>2.26</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $202.62</small></div></td>
                    <td class="compact-cell">
                <div><strong>10/10 [HOT]</strong> +4</div>
                <div><small>Avg Rank: 4.2</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>10</strong></td>
                </tr>
            
                <tr>
                    <td>2</td>
                    <td><strong>META</strong></td>
                    <td>223.62W</td>
                    <td>1.80</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $651.14</small></div></td>
                    <td class="compact-cell">
                <div><strong>4/10 [OCC]</strong> +14</div>
                <div><small>Avg Rank: 20.5</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>3</td>
                    <td><strong>TSLA</strong></td>
                    <td>200.43W</td>
                    <td>1.45</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $456.10</small></div></td>
                    <td class="compact-cell">
                <div><strong>10/10 [HOT]</strong> -</div>
                <div><small>Avg Rank: 5.0</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>10</strong></td>
                </tr>
            
                <tr>
                    <td>4</td>
                    <td><strong>AMZN</strong></td>
                    <td>127.41W</td>
                    <td>1.89</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $244.30</small></div></td>
                    <td class="compact-cell">
                <div><strong>8/10 [ACT]</strong> +16</div>
                <div><small>Avg Rank: 15.2</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>5</strong></td>
                </tr>
            
                <tr>
                    <td>5</td>
                    <td><strong>AAPL</strong></td>
                    <td>120.83W</td>
                    <td>1.87</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $270.04</small></div></td>
                    <td class="compact-cell">
                <div><strong>10/10 [HOT]</strong> +14</div>
                <div><small>Avg Rank: 12.6</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>10</strong></td>
                </tr>
            
                <tr>
                    <td>6</td>
                    <td><strong>GOOGL</strong></td>
                    <td>98.57W</td>
                    <td>2.09</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $280.71</small></div></td>
                    <td class="compact-cell">
                <div><strong>9/10 [HOT]</strong> +12</div>
                <div><small>Avg Rank: 16.4</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>8</strong></td>
                </tr>
            
                <tr>
                    <td>7</td>
                    <td><strong>IBIT</strong></td>
                    <td>86.25W</td>
                    <td>2.84</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $62.21</small></div></td>
                    <td class="compact-cell">
                <div><strong>7/10 [ACT]</strong> -1</div>
                <div><small>Avg Rank: 14.1</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>8</td>
                    <td><strong>MSFT</strong></td>
                    <td>82.23W</td>
                    <td>2.33</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $517.71</small></div></td>
                    <td class="compact-cell">
                <div><strong>6/10 [ACT]</strong> +2</div>
                <div><small>Avg Rank: 15.0</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>9</td>
                    <td><strong>MSTR</strong></td>
                    <td>76.51W</td>
                    <td>1.48</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $270.13</small></div></td>
                    <td class="compact-cell">
                <div><strong>6/10 [ACT]</strong> +13</div>
                <div><small>Avg Rank: 22.3</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>10</td>
                    <td><strong>CMG</strong></td>
                    <td>67.51W</td>
                    <td>0.70</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $31.67</small></div></td>
                    <td class="compact-cell">
                <div><strong>1/10 [NEW]</strong> -</div>
                <div><small>Avg Rank: 15.0</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>11</td>
                    <td><strong>PLTR</strong></td>
                    <td>65.39W</td>
                    <td>1.86</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $201.56</small></div></td>
                    <td class="compact-cell">
                <div><strong>7/10 [ACT]</strong> -8</div>
                <div><small>Avg Rank: 14.7</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>12</td>
                    <td><strong>AMD</strong></td>
                    <td>64.22W</td>
                    <td>1.23</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $256.85</small></div></td>
                    <td class="compact-cell">
                <div><strong>8/10 [ACT]</strong> +1</div>
                <div><small>Avg Rank: 13.6</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>5</strong></td>
                </tr>
            
                <tr>
                    <td>13</td>
                    <td><strong>GOOG</strong></td>
                    <td>60.78W</td>
                    <td>1.94</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $281.47</small></div></td>
                    <td class="compact-cell">
                <div><strong>2/10 [NEW]</strong> +11</div>
                <div><small>Avg Rank: 23.5</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>14</td>
                    <td><strong>TLT</strong></td>
                    <td>57.67W</td>
                    <td>1.18</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $90.38</small></div></td>
                    <td class="compact-cell">
                <div><strong>8/10 [ACT]</strong> -16</div>
                <div><small>Avg Rank: 18.9</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>5</strong></td>
                </tr>
            
                <tr>
                    <td>15</td>
                    <td><strong>GLD</strong></td>
                    <td>56.18W</td>
                    <td>1.31</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $368.12</small></div></td>
                    <td class="compact-cell">
                <div><strong>8/10 [ACT]</strong> -8</div>
                <div><small>Avg Rank: 11.6</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>5</strong></td>
                </tr>
            
                <tr>
                    <td>16</td>
                    <td><strong>SOFI</strong></td>
                    <td>51.21W</td>
                    <td>2.29</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $29.63</small></div></td>
                    <td class="compact-cell">
                <div><strong>8/10 [ACT]</strong> -5</div>
                <div><small>Avg Rank: 16.8</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>5</strong></td>
                </tr>
            
                <tr>
                    <td>17</td>
                    <td><strong>CORZ</strong></td>
                    <td>51.19W</td>
                    <td>7.22</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $21.65</small></div></td>
                    <td class="compact-cell">
                <div><strong>1/10 [NEW]</strong> -</div>
                <div><small>Avg Rank: 22.0</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>18</td>
                    <td><strong>MARA</strong></td>
                    <td>49.19W</td>
                    <td>8.73</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $18.25</small></div></td>
                    <td class="compact-cell">
                <div><strong>2/10 [NEW]</strong> +3</div>
                <div><small>Avg Rank: 24.5</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>19</td>
                    <td><strong>SOUN</strong></td>
                    <td>46.73W</td>
                    <td>0.79</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $17.59</small></div></td>
                    <td class="compact-cell">
                <div><strong>2/10 [NEW]</strong> -3</div>
                <div><small>Avg Rank: 22.5</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>20</td>
                    <td><strong>BYND</strong></td>
                    <td>45.59W</td>
                    <td>1.57</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $1.66</small></div></td>
                    <td class="compact-cell">
                <div><strong>7/10 [ACT]</strong> -8</div>
                <div><small>Avg Rank: 11.7</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>21</td>
                    <td><strong>SLV</strong></td>
                    <td>42.70W</td>
                    <td>2.66</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $44.01</small></div></td>
                    <td class="compact-cell">
                <div><strong>8/10 [ACT]</strong> -15</div>
                <div><small>Avg Rank: 17.0</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>5</strong></td>
                </tr>
            
                <tr>
                    <td>22</td>
                    <td><strong>BMNR</strong></td>
                    <td>41.46W</td>
                    <td>1.49</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $46.65</small></div></td>
                    <td class="compact-cell">
                <div><strong>1/10 [NEW]</strong> -</div>
                <div><small>Avg Rank: 27.0</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>23</td>
                    <td><strong>SPX</strong></td>
                    <td>39.66W</td>
                    <td>0.46</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><small>N/A</small></td>
                    <td class="compact-cell">
                <div><strong>7/10 [ACT]</strong> -6</div>
                <div><small>Avg Rank: 23.0</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>24</td>
                    <td><strong>INTC</strong></td>
                    <td>37.58W</td>
                    <td>1.49</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $39.91</small></div></td>
                    <td class="compact-cell">
                <div><strong>7/10 [ACT]</strong> -9</div>
                <div><small>Avg Rank: 14.7</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                <tr>
                    <td>25</td>
                    <td><strong>AVGO</strong></td>
                    <td>37.04W</td>
                    <td>2.73</td>
                    <td>0.00W</td>
                    <td>0.00</td>
                    <td class="compact-cell"><div><small>Current: $369.74</small></div></td>
                    <td class="compact-cell">
                <div><strong>2/10 [NEW]</strong> -</div>
                <div><small>Avg Rank: 30.0</small></div>
            </td>
                    <td class="compact-cell" style="text-align: center;"><strong>1</strong></td>
                </tr>
            
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Call/Put Ratio Analysis</h2>
            <div class="chart-container">
                <canvas id="cpRatioChart"></canvas>
            </div>
        </div>

        <div class="section">
            <h2>Open Interest Distribution</h2>
            <div class="chart-container">
                <canvas id="oiChart"></canvas>
            </div>
        </div>

        <div class="footer">
            <p>Options Anomaly Detection System | Data: Polygon.io</p>
            <p>For reference only. Not investment advice.</p>
        </div>
    </div>

    <script>
        // Store table data for sorting
        const indexData = [{"ticker": "SPY", "total_volume": 8450612, "put_volume": 4740274, "call_volume": 3710338, "cp_volume_ratio": 0.78, "contracts_count": 5060, "put_contracts": 2681, "call_contracts": 2379, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 10, "appearance_rate": 100.0, "avg_rank": 2.6, "best_rank": 1, "worst_rank": 17, "today_rank": 1, "rank_change": 16, "trend": "falling", "streak": 10, "icon": "[HOT]"}, "current_price": 682.06}, {"ticker": "QQQ", "total_volume": 4401356, "put_volume": 2519382, "call_volume": 1881974, "cp_volume_ratio": 0.75, "contracts_count": 4619, "put_contracts": 2403, "call_contracts": 2216, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 10, "appearance_rate": 100.0, "avg_rank": 3.8, "best_rank": 2, "worst_rank": 19, "today_rank": 2, "rank_change": 17, "trend": "falling", "streak": 10, "icon": "[HOT]"}, "current_price": 629.05}, {"ticker": "IWM", "total_volume": 1558805, "put_volume": 971696, "call_volume": 587109, "cp_volume_ratio": 0.6, "contracts_count": 1919, "put_contracts": 897, "call_contracts": 1022, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 8, "appearance_rate": 80.0, "avg_rank": 6.6, "best_rank": 5, "worst_rank": 9, "today_rank": 7, "rank_change": 0, "trend": "stable", "streak": 5, "icon": "[ACT]"}, "current_price": 246.23}];
        const stockData = [{"ticker": "NVDA", "total_volume": 3023124, "put_volume": 926452, "call_volume": 2096672, "cp_volume_ratio": 2.26, "contracts_count": 2564, "put_contracts": 1157, "call_contracts": 1407, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 10, "appearance_rate": 100.0, "avg_rank": 4.2, "best_rank": 2, "worst_rank": 8, "today_rank": 4, "rank_change": 4, "trend": "stable", "streak": 10, "icon": "[HOT]"}, "current_price": 202.62}, {"ticker": "META", "total_volume": 2236172, "put_volume": 798086, "call_volume": 1438086, "cp_volume_ratio": 1.8, "contracts_count": 3976, "put_contracts": 1684, "call_contracts": 2292, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 4, "appearance_rate": 40.0, "avg_rank": 20.5, "best_rank": 5, "worst_rank": 29, "today_rank": 5, "rank_change": 14, "trend": "rising", "streak": 1, "icon": "[OCC]"}, "current_price": 651.14}, {"ticker": "TSLA", "total_volume": 2004310, "put_volume": 817836, "call_volume": 1186474, "cp_volume_ratio": 1.45, "contracts_count": 3423, "put_contracts": 1522, "call_contracts": 1901, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 10, "appearance_rate": 100.0, "avg_rank": 5.0, "best_rank": 3, "worst_rank": 7, "today_rank": 6, "rank_change": 0, "trend": "stable", "streak": 10, "icon": "[HOT]"}, "current_price": 456.1}, {"ticker": "AMZN", "total_volume": 1274103, "put_volume": 441165, "call_volume": 832938, "cp_volume_ratio": 1.89, "contracts_count": 1720, "put_contracts": 791, "call_contracts": 929, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 8, "appearance_rate": 80.0, "avg_rank": 15.2, "best_rank": 8, "worst_rank": 24, "today_rank": 8, "rank_change": 16, "trend": "stable", "streak": 5, "icon": "[ACT]"}, "current_price": 244.3}, {"ticker": "AAPL", "total_volume": 1208271, "put_volume": 421403, "call_volume": 786868, "cp_volume_ratio": 1.87, "contracts_count": 1618, "put_contracts": 746, "call_contracts": 872, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 10, "appearance_rate": 100.0, "avg_rank": 12.6, "best_rank": 5, "worst_rank": 23, "today_rank": 9, "rank_change": 14, "trend": "falling", "streak": 10, "icon": "[HOT]"}, "current_price": 270.04}, {"ticker": "GOOGL", "total_volume": 985687, "put_volume": 318671, "call_volume": 667016, "cp_volume_ratio": 2.09, "contracts_count": 1967, "put_contracts": 927, "call_contracts": 1040, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 9, "appearance_rate": 90.0, "avg_rank": 16.4, "best_rank": 7, "worst_rank": 29, "today_rank": 10, "rank_change": 12, "trend": "rising", "streak": 8, "icon": "[HOT]"}, "current_price": 280.71}, {"ticker": "IBIT", "total_volume": 862500, "put_volume": 224437, "call_volume": 638063, "cp_volume_ratio": 2.84, "contracts_count": 1581, "put_contracts": 663, "call_contracts": 918, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 7, "appearance_rate": 70.0, "avg_rank": 14.1, "best_rank": 11, "worst_rank": 18, "today_rank": 12, "rank_change": -1, "trend": "stable", "streak": 1, "icon": "[ACT]"}, "current_price": 62.21}, {"ticker": "MSFT", "total_volume": 822257, "put_volume": 246817, "call_volume": 575440, "cp_volume_ratio": 2.33, "contracts_count": 2184, "put_contracts": 1017, "call_contracts": 1167, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 6, "appearance_rate": 60.0, "avg_rank": 15.0, "best_rank": 6, "worst_rank": 28, "today_rank": 13, "rank_change": 2, "trend": "falling", "streak": 1, "icon": "[ACT]"}, "current_price": 517.71}, {"ticker": "MSTR", "total_volume": 765147, "put_volume": 307986, "call_volume": 457161, "cp_volume_ratio": 1.48, "contracts_count": 2339, "put_contracts": 1043, "call_contracts": 1296, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 6, "appearance_rate": 60.0, "avg_rank": 22.3, "best_rank": 14, "worst_rank": 27, "today_rank": 14, "rank_change": 13, "trend": "stable", "streak": 1, "icon": "[ACT]"}, "current_price": 270.13}, {"ticker": "CMG", "total_volume": 675079, "put_volume": 396274, "call_volume": 278805, "cp_volume_ratio": 0.7, "contracts_count": 952, "put_contracts": 420, "call_contracts": 532, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 1, "appearance_rate": 10.0, "avg_rank": 15.0, "best_rank": 15, "worst_rank": 15, "today_rank": 15, "rank_change": 0, "trend": "stable", "streak": 1, "icon": "[NEW]"}, "current_price": 31.67}, {"ticker": "PLTR", "total_volume": 653901, "put_volume": 228271, "call_volume": 425630, "cp_volume_ratio": 1.86, "contracts_count": 1605, "put_contracts": 721, "call_contracts": 884, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 7, "appearance_rate": 70.0, "avg_rank": 14.7, "best_rank": 8, "worst_rank": 21, "today_rank": 16, "rank_change": -8, "trend": "stable", "streak": 1, "icon": "[ACT]"}, "current_price": 201.56}, {"ticker": "AMD", "total_volume": 642236, "put_volume": 287683, "call_volume": 354553, "cp_volume_ratio": 1.23, "contracts_count": 1833, "put_contracts": 767, "call_contracts": 1066, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 8, "appearance_rate": 80.0, "avg_rank": 13.6, "best_rank": 8, "worst_rank": 18, "today_rank": 17, "rank_change": 1, "trend": "falling", "streak": 5, "icon": "[ACT]"}, "current_price": 256.85}, {"ticker": "GOOG", "total_volume": 607845, "put_volume": 206939, "call_volume": 400906, "cp_volume_ratio": 1.94, "contracts_count": 1749, "put_contracts": 793, "call_contracts": 956, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 2, "appearance_rate": 20.0, "avg_rank": 23.5, "best_rank": 18, "worst_rank": 29, "today_rank": 18, "rank_change": 11, "trend": "stable", "streak": 1, "icon": "[NEW]"}, "current_price": 281.47}, {"ticker": "TLT", "total_volume": 576718, "put_volume": 264302, "call_volume": 312416, "cp_volume_ratio": 1.18, "contracts_count": 1244, "put_contracts": 572, "call_contracts": 672, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 8, "appearance_rate": 80.0, "avg_rank": 18.9, "best_rank": 3, "worst_rank": 30, "today_rank": 19, "rank_change": -16, "trend": "rising", "streak": 5, "icon": "[ACT]"}, "current_price": 90.3783}, {"ticker": "GLD", "total_volume": 561763, "put_volume": 243240, "call_volume": 318523, "cp_volume_ratio": 1.31, "contracts_count": 2856, "put_contracts": 1200, "call_contracts": 1656, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 8, "appearance_rate": 80.0, "avg_rank": 11.6, "best_rank": 7, "worst_rank": 20, "today_rank": 20, "rank_change": -8, "trend": "falling", "streak": 5, "icon": "[ACT]"}, "current_price": 368.12}, {"ticker": "SOFI", "total_volume": 512093, "put_volume": 155555, "call_volume": 356538, "cp_volume_ratio": 2.29, "contracts_count": 999, "put_contracts": 429, "call_contracts": 570, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 8, "appearance_rate": 80.0, "avg_rank": 16.8, "best_rank": 7, "worst_rank": 25, "today_rank": 21, "rank_change": -5, "trend": "stable", "streak": 5, "icon": "[ACT]"}, "current_price": 29.63}, {"ticker": "CORZ", "total_volume": 511892, "put_volume": 62297, "call_volume": 449595, "cp_volume_ratio": 7.22, "contracts_count": 372, "put_contracts": 138, "call_contracts": 234, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 1, "appearance_rate": 10.0, "avg_rank": 22.0, "best_rank": 22, "worst_rank": 22, "today_rank": 22, "rank_change": 0, "trend": "stable", "streak": 1, "icon": "[NEW]"}, "current_price": 21.65}, {"ticker": "MARA", "total_volume": 491899, "put_volume": 50545, "call_volume": 441354, "cp_volume_ratio": 8.73, "contracts_count": 653, "put_contracts": 249, "call_contracts": 404, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 2, "appearance_rate": 20.0, "avg_rank": 24.5, "best_rank": 23, "worst_rank": 26, "today_rank": 23, "rank_change": 3, "trend": "stable", "streak": 1, "icon": "[NEW]"}, "current_price": 18.2497}, {"ticker": "SOUN", "total_volume": 467255, "put_volume": 260720, "call_volume": 206535, "cp_volume_ratio": 0.79, "contracts_count": 506, "put_contracts": 192, "call_contracts": 314, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 2, "appearance_rate": 20.0, "avg_rank": 22.5, "best_rank": 21, "worst_rank": 24, "today_rank": 24, "rank_change": -3, "trend": "stable", "streak": 1, "icon": "[NEW]"}, "current_price": 17.59}, {"ticker": "BYND", "total_volume": 455858, "put_volume": 177376, "call_volume": 278482, "cp_volume_ratio": 1.57, "contracts_count": 421, "put_contracts": 147, "call_contracts": 274, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 7, "appearance_rate": 70.0, "avg_rank": 11.7, "best_rank": 4, "worst_rank": 25, "today_rank": 25, "rank_change": -8, "trend": "falling", "streak": 1, "icon": "[ACT]"}, "current_price": 1.6597}, {"ticker": "SLV", "total_volume": 427014, "put_volume": 116544, "call_volume": 310470, "cp_volume_ratio": 2.66, "contracts_count": 1407, "put_contracts": 500, "call_contracts": 907, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 8, "appearance_rate": 80.0, "avg_rank": 17.0, "best_rank": 9, "worst_rank": 26, "today_rank": 26, "rank_change": -15, "trend": "falling", "streak": 5, "icon": "[ACT]"}, "current_price": 44.01}, {"ticker": "BMNR", "total_volume": 414606, "put_volume": 166807, "call_volume": 247799, "cp_volume_ratio": 1.49, "contracts_count": 1048, "put_contracts": 496, "call_contracts": 552, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 1, "appearance_rate": 10.0, "avg_rank": 27.0, "best_rank": 27, "worst_rank": 27, "today_rank": 27, "rank_change": 0, "trend": "stable", "streak": 1, "icon": "[NEW]"}, "current_price": 46.65}, {"ticker": "SPX", "total_volume": 396552, "put_volume": 271724, "call_volume": 124828, "cp_volume_ratio": 0.46, "contracts_count": 3045, "put_contracts": 2003, "call_contracts": 1042, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 7, "appearance_rate": 70.0, "avg_rank": 23.0, "best_rank": 18, "worst_rank": 28, "today_rank": 28, "rank_change": -6, "trend": "stable", "streak": 1, "icon": "[ACT]"}, "current_price": null}, {"ticker": "INTC", "total_volume": 375809, "put_volume": 151022, "call_volume": 224787, "cp_volume_ratio": 1.49, "contracts_count": 1036, "put_contracts": 451, "call_contracts": 585, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 7, "appearance_rate": 70.0, "avg_rank": 14.7, "best_rank": 7, "worst_rank": 29, "today_rank": 29, "rank_change": -9, "trend": "falling", "streak": 1, "icon": "[ACT]"}, "current_price": 39.9097}, {"ticker": "AVGO", "total_volume": 370355, "put_volume": 99245, "call_volume": 271110, "cp_volume_ratio": 2.73, "contracts_count": 1465, "put_contracts": 627, "call_contracts": 838, "total_oi": 0, "put_oi": 0, "call_oi": 0, "cp_oi_ratio": 0, "history": {"appearances": 2, "appearance_rate": 20.0, "avg_rank": 30.0, "best_rank": 30, "worst_rank": 30, "today_rank": 30, "rank_change": 0, "trend": "stable", "streak": 1, "icon": "[NEW]"}, "current_price": 369.7439}];

        let indexSortColumn = 'total_volume';
        let indexSortOrder = 'desc';
        let stockSortColumn = 'total_volume';
        let stockSortOrder = 'desc';

        // Table sorting function
        function sortTable(tableType, column, type) {
            const tableData = tableType === 'index' ? indexData : stockData;
            const currentSortColumn = tableType === 'index' ? indexSortColumn : stockSortColumn;
            const currentSortOrder = tableType === 'index' ? indexSortOrder : stockSortOrder;
            // Toggle sort order if clicking same column
            let newSortOrder;
            if (currentSortColumn === column) {
                newSortOrder = currentSortOrder === 'asc' ? 'desc' : 'asc';
            } else {
                newSortOrder = 'desc'; // Default to descending
            }

            // Update state
            if (tableType === 'index') {
                indexSortColumn = column;
                indexSortOrder = newSortOrder;
            } else {
                stockSortColumn = column;
                stockSortOrder = newSortOrder;
            }

            // Sort data
            const sortedData = [...tableData].sort((a, b) => {
                let valA = a[column];
                let valB = b[column];

                // Handle string comparison
                if (type === 'string') {
                    valA = String(valA).toLowerCase();
                    valB = String(valB).toLowerCase();
                    return newSortOrder === 'asc'
                        ? valA.localeCompare(valB)
                        : valB.localeCompare(valA);
                }

                // Handle number comparison
                valA = Number(valA) || 0;
                valB = Number(valB) || 0;
                return newSortOrder === 'asc' ? valA - valB : valB - valA;
            });

            // Update table
            renderTable(tableType, sortedData);

            // Update sort indicators (only for this table)
            const tableSelector = tableType === 'index' ? '#indexTable' : '#stockTable';
            document.querySelectorAll(`${tableSelector} th.sortable`).forEach(th => {
                th.classList.remove('sorted-asc', 'sorted-desc');
            });
            const activeHeader = document.querySelector(`${tableSelector} th[data-column="${column}"]`);
            if (activeHeader) {
                activeHeader.classList.add(`sorted-${newSortOrder}`);
            }
        }

        // Helper: Format contract short form (e.g., 250131C600)
        function formatContractShort(contract) {
            try {
                let expiry = contract.expiry || '';
                if (expiry) {
                    // Extract YYMMDD from 2025-01-31
                    expiry = expiry.replace(/-/g, '').slice(-6);
                }
                const contractType = (contract.type || 'X')[0].toUpperCase();
                const strike = Math.floor(contract.strike || 0);
                return `${expiry}${contractType}${strike}`;
            } catch (e) {
                return 'N/A';
            }
        }

        // Render table with data
        function renderTable(tableType, data) {
            const tbodyId = tableType === 'index' ? 'indexTableBody' : 'stockTableBody';
            const tbody = document.getElementById(tbodyId);
            tbody.innerHTML = '';

            data.forEach((item, idx) => {
                // Format volume and OI in ‰∏á (W) with 2 decimal places
                const volumeW = (item.total_volume / 10000).toFixed(2) + 'W';
                const oiW = (item.total_oi / 10000).toFixed(2) + 'W';

                // Format Top 3 contracts with Current Price at the beginning
                let top3Html = '';
                const currentPrice = item.current_price;
                if (currentPrice) {
                    top3Html += `<div><small>Current: $${currentPrice.toFixed(2)}</small></div>`;
                }

                const top3Contracts = item.top_3_contracts || [];
                top3Contracts.slice(0, 3).forEach((contract, i) => {
                    const contractShort = formatContractShort(contract);
                    const oiK = (contract.oi || 0) / 1000;
                    const pct = contract.percentage || 0;
                    top3Html += `<div class='contract-item'>${i + 1}. ${contractShort} <span class='oi-badge'>${Math.round(oiK)}K (${pct.toFixed(1)}%)</span></div>`;
                });
                if (!top3Html) {
                    top3Html = '<small>N/A</small>';
                }

                // Format history
                const history = item.history || {};
                const appearances = history.appearances || 0;
                const icon = history.icon || '[NEW]';
                const rankChange = history.rank_change;
                const avgRank = history.avg_rank;

                let rankSymbol = '-';
                if (rankChange !== null && rankChange !== undefined && rankChange !== 0) {
                    if (rankChange > 0) {
                        rankSymbol = `+${rankChange}`;
                    } else {
                        rankSymbol = `-${Math.abs(rankChange)}`;
                    }
                }

                const historyHtml = `
                    <div><strong>${appearances}/10 ${icon}</strong> ${rankSymbol}</div>
                    <div><small>Avg Rank: ${avgRank || 'N/A'}</small></div>
                `;

                // Streak (consecutive days)
                const streak = history.streak || 0;
                const streakHtml = streak > 0 ? `<strong>${streak}</strong>` : '-';

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${idx + 1}</td>
                    <td><strong>${item.ticker}</strong></td>
                    <td>${volumeW}</td>
                    <td>${item.cp_volume_ratio.toFixed(2)}</td>
                    <td>${oiW}</td>
                    <td>${item.cp_oi_ratio.toFixed(2)}</td>
                    <td class="compact-cell">${top3Html}</td>
                    <td class="compact-cell">${historyHtml}</td>
                    <td class="compact-cell" style="text-align: center;">${streakHtml}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Add click handlers to sortable headers
        document.addEventListener('DOMContentLoaded', () => {
            // Setup sorting for index table
            document.querySelectorAll('#indexTable th.sortable').forEach(th => {
                th.addEventListener('click', () => {
                    const column = th.dataset.column;
                    const type = th.dataset.type;
                    sortTable('index', column, type);
                });
            });

            // Setup sorting for stock table
            document.querySelectorAll('#stockTable th.sortable').forEach(th => {
                th.addEventListener('click', () => {
                    const column = th.dataset.column;
                    const type = th.dataset.type;
                    sortTable('stock', column, type);
                });
            });

            // Set initial sort indicators for both tables
            const indexHeader = document.querySelector('#indexTable th[data-column="total_volume"]');
            if (indexHeader) {
                indexHeader.classList.add('sorted-desc');
            }
            const stockHeader = document.querySelector('#stockTable th[data-column="total_volume"]');
            if (stockHeader) {
                stockHeader.classList.add('sorted-desc');
            }
        });

        // Volume Chart with C/P ratio in tooltip (stocks & ETFs only, excludes Market Indices)
        const volumeCtx = document.getElementById('volumeChart').getContext('2d');
        const cpRatiosForVolume = [2.26, 1.8, 1.45, 1.89, 1.87, 2.09, 2.84, 2.33, 1.48, 0.7, 1.86, 1.23, 1.94, 1.18, 1.31, 2.29, 7.22, 8.73, 0.79, 1.57, 2.66, 1.49, 0.46, 1.49, 2.73];

        new Chart(volumeCtx, {
            type: 'bar',
            data: {
                labels: ["NVDA", "META", "TSLA", "AMZN", "AAPL", "GOOGL", "IBIT", "MSFT", "MSTR", "CMG", "PLTR", "AMD", "GOOG", "TLT", "GLD", "SOFI", "CORZ", "MARA", "SOUN", "BYND", "SLV", "BMNR", "SPX", "INTC", "AVGO"],
                datasets: [{
                    label: 'ÊÄªÊàê‰∫§Èáè',
                    data: [3023124, 2236172, 2004310, 1274103, 1208271, 985687, 862500, 822257, 765147, 675079, 653901, 642236, 607845, 576718, 561763, 512093, 511892, 491899, 467255, 455858, 427014, 414606, 396552, 375809, 370355],
                    backgroundColor: 'rgba(102, 126, 234, 0.8)',
                    borderColor: 'rgba(102, 126, 234, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    title: {
                        display: true,
                        text: 'ÊúüÊùÉÊàê‰∫§Èáè'
                    },
                    tooltip: {
                        callbacks: {
                            afterLabel: function(context) {
                                const index = context.dataIndex;
                                const cpRatio = cpRatiosForVolume[index];
                                return 'C/P Ratio: ' + cpRatio.toFixed(2);
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // C/P Ratio Chart
        const cpCtx = document.getElementById('cpRatioChart').getContext('2d');
        new Chart(cpCtx, {
            type: 'bar',
            data: {
                labels: ["NVDA", "META", "TSLA", "AMZN", "AAPL", "GOOGL", "IBIT", "MSFT", "MSTR", "CMG", "PLTR", "AMD", "GOOG", "TLT", "GLD", "SOFI", "CORZ", "MARA", "SOUN", "BYND", "SLV", "BMNR", "SPX", "INTC", "AVGO"],
                datasets: [
                    {
                        label: 'C/P Êàê‰∫§ÊØî',
                        data: [2.26, 1.8, 1.45, 1.89, 1.87, 2.09, 2.84, 2.33, 1.48, 0.7, 1.86, 1.23, 1.94, 1.18, 1.31, 2.29, 7.22, 8.73, 0.79, 1.57, 2.66, 1.49, 0.46, 1.49, 2.73],
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'C/P ÊåÅ‰ªìÊØî',
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Call/Put ÊØî‰æãÂØπÊØî'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // OI Chart
        const oiCtx = document.getElementById('oiChart').getContext('2d');
        new Chart(oiCtx, {
            type: 'bar',
            data: {
                labels: ["NVDA", "META", "TSLA", "AMZN", "AAPL", "GOOGL", "IBIT", "MSFT", "MSTR", "CMG", "PLTR", "AMD", "GOOG", "TLT", "GLD", "SOFI", "CORZ", "MARA", "SOUN", "BYND", "SLV", "BMNR", "SPX", "INTC", "AVGO"],
                datasets: [{
                    label: 'ÊåÅ‰ªìÈáè',
                    data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    backgroundColor: 'rgba(75, 192, 192, 0.6)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'ÊåÅ‰ªìÈáèÂàÜÂ∏É'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>